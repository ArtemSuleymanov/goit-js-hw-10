{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst dateTimePicker = document.querySelector(\"#datetime-picker\");\nconst btn = document.querySelector(\"[data-start]\");\nconst daysEl = document.querySelector(\"[data-days]\");\nconst hoursEl = document.querySelector(\"[data-hours]\");\nconst minutesEl = document.querySelector(\"[data-minutes]\");\nconst secondsEl = document.querySelector(\"[data-seconds]\");\n\nlet userSelectedDate = null;\nlet timerId = null;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        const selectedDate = selectedDates[0];\n        if (selectedDate <= new Date()) {\n            iziToast.error({\n                title: \"Error\",\n                message: \"Please choose a date in the future\",});\n                btn.disabled = true;\n            } else {\n                userSelectedDate = selectedDate;\n                btn.disabled = false;\n            }\n    },\n};\nflatpickr(dateTimePicker, options);\n\nfunction addLeadingZero(value) {\n    return String(value).padStart(2, \"0\");\n}\n\nfunction updateTime({ days, hours, minutes, seconds }) {\n    daysEl.textContent = addLeadingZero(days);\n    hoursEl.textContent = addLeadingZero(hours);\n    minutesEl.textContent = addLeadingZero(minutes);\n    secondsEl.textContent = addLeadingZero(seconds);\n}\n\nfunction startTimer() {\n    const endTimer = userSelectedDate.getTime();\n  \n    timerId = setInterval(() => {\n      const currentTime = Date.now();\n      const timeDifference = endTimer - currentTime;\n  \n      if (timeDifference <= 0) {\n        clearInterval(timerId);\n        updateTime({ days: 0, hours: 0, minutes: 0, seconds: 0 });\n        iziToast.success({\n          title: \"Complete\",\n          message: \"The countdown has ended!\",\n        });\n        dateTimePicker.disabled = false;\n        btn.disabled = true;\n        return;\n      }\n  \n      const timeComponents = convertMs(timeDifference);\n      updateTime(timeComponents);\n    }, 1000);\n  \n    dateTimePicker.disabled = true;\n    btn.disabled = true;\n  }\n\n  function convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n  }\n\nbtn.addEventListener(\"click\", startTimer);\n"],"names":["dateTimePicker","btn","daysEl","hoursEl","minutesEl","secondsEl","userSelectedDate","timerId","options","selectedDates","selectedDate","iziToast","flatpickr","addLeadingZero","value","updateTime","days","hours","minutes","seconds","startTimer","endTimer","currentTime","timeDifference","timeComponents","convertMs","ms"],"mappings":"+IAKA,MAAMA,EAAiB,SAAS,cAAc,kBAAkB,EAC1DC,EAAM,SAAS,cAAc,cAAc,EAC3CC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAY,SAAS,cAAc,gBAAgB,EAEzD,IAAIC,EAAmB,KACnBC,EAAU,KAEd,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnB,MAAMC,EAAeD,EAAc,CAAC,EAChCC,GAAgB,IAAI,MACpBC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,oCAAoC,CAAE,EAC/CV,EAAI,SAAW,KAEfK,EAAmBI,EACnBT,EAAI,SAAW,GAE1B,CACL,EACAW,EAAUZ,EAAgBQ,CAAO,EAEjC,SAASK,EAAeC,EAAO,CAC3B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CAEA,SAASC,EAAW,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACnDjB,EAAO,YAAcW,EAAeG,CAAI,EACxCb,EAAQ,YAAcU,EAAeI,CAAK,EAC1Cb,EAAU,YAAcS,EAAeK,CAAO,EAC9Cb,EAAU,YAAcQ,EAAeM,CAAO,CAClD,CAEA,SAASC,GAAa,CAClB,MAAMC,EAAWf,EAAiB,UAElCC,EAAU,YAAY,IAAM,CAC1B,MAAMe,EAAc,KAAK,MACnBC,EAAiBF,EAAWC,EAElC,GAAIC,GAAkB,EAAG,CACvB,cAAchB,CAAO,EACrBQ,EAAW,CAAE,KAAM,EAAG,MAAO,EAAG,QAAS,EAAG,QAAS,CAAC,CAAE,EACxDJ,EAAS,QAAQ,CACf,MAAO,WACP,QAAS,0BACnB,CAAS,EACDX,EAAe,SAAW,GAC1BC,EAAI,SAAW,GACf,MACD,CAED,MAAMuB,EAAiBC,EAAUF,CAAc,EAC/CR,EAAWS,CAAc,CAC1B,EAAE,GAAI,EAEPxB,EAAe,SAAW,GAC1BC,EAAI,SAAW,EAChB,CAED,SAASwB,EAAUC,EAAI,CAMrB,MAAMV,EAAO,KAAK,MAAMU,EAAK,KAAG,EAC1BT,EAAQ,KAAK,MAAOS,EAAK,MAAO,IAAI,EACpCR,EAAU,KAAK,MAAQQ,EAAK,MAAO,KAAQ,GAAM,EACjDP,EAAU,KAAK,MAASO,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAV,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAEHlB,EAAI,iBAAiB,QAASmB,CAAU"}